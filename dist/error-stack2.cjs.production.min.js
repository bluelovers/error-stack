"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=/^([a-z][a-z0-9_]*):\s+([\s\S]+)$/i,t=/^at\s+/,r=/^eval\s+at\s+/;function s(e){return e.trim()}function a(e,t,r){if(!e.endsWith(r))return[e];let a,n=e.length-1,c=1;for(;--n>=0;){const s=e.charAt(n);if(s===r)c++;else if(s===t&&0==--c){a=n;break}}return[e.slice(0,a),e.slice(a+1,-1)].map(s)}function n(e){const[t,r,s]=e.split(":");return{source:t,line:r,col:s}}function c(e){const[t,a]=e.replace(r,"").split(/,\s+/g).map(s),{source:c,line:l,col:i}=o(t);return{source:c,line:l,col:i,evalTrace:n(a)}}function o(e,s){const o=e.replace(t,"");let[l,i]=a(o,"(",")");i||([l,i]=[i,l]);const u={};if(l){const[e,t]=a(l,"[","]");u.callee=e,u.calleeNote=t}else u.callee=l;return"eval"===u.callee&&(u.eval=!0),Object.assign(u,s&&r.test(i)?c(i):n(i)),u}function l(t){const[r,...a]=t.split(/\r|\n/g),n=a.findIndex((e=>e.trimLeft().startsWith("at"))),c=[r,...a.splice(0,n)],[,l,i]=c.join("\n").match(e);return{type:l,message:i,traces:a.map((e=>o(s(e),!0)))}}function i({callee:e,calleeNote:t,source:r,line:s,col:a}){const n=[r,s,a].filter(Boolean).join(":");return e?`${e}${t?` [${t}]`:""} (${n})`:n}function u({callee:e,evalTrace:t,...r}){return`${e} (eval at ${i({...r,callee:"<anonymous>"})}, ${i(t)})`}function p({type:e,message:t}){return`${e}: ${t}`}class f{constructor(e){if("string"!=typeof e)throw new TypeError("stack must be a string");Object.assign(this,l(e))}filter(e){return this.traces=this.traces.filter(e),this}format(){const{type:e,message:t}=this,r=`${p({type:e,message:t})}`,s=this.traces.map((e=>`    at ${e.eval?u(e):i(e)}`)).join("\n");return s?r+"\n"+s:r}}function m(e){return new f(e)}exports.ErrorStack=f,exports.breakBrackets=a,exports.default=m,exports.formatEvalTrace=u,exports.formatMessage=p,exports.formatTrace=i,exports.parse=l,exports.parseErrorStack=m,exports.parseEvalSource=c,exports.parseSource=n,exports.parseTrace=o;
//# sourceMappingURL=error-stack2.cjs.production.min.js.map
